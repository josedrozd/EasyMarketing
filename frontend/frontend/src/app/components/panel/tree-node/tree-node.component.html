<li [ngClass]="node.group ? 'group-true' : 'group-false'">
    <div class="node-header">
      <span *ngIf="node.children" (click)="toggle()" class="toggle">
        {{ node.expanded ? 'v' : '>' }}
      </span>
  
      <!-- Inline edit vs label -->
      <ng-container *ngIf="node.editing; else showLabel">
        <input [(ngModel)]="node.name" placeholder="Nombre…"/>
        <button (click)="confirm.emit(node)">✔️</button>
      </ng-container>
      <ng-template #showLabel>
        <span class="label">{{ node.name }}</span>
      </ng-template>
    </div>
  
    <!-- Hijos recursivos -->
    <ul *ngIf="node.expanded" class="children">
        <ng-container *ngFor="let child of node.children">
          <app-tree-node
            [node]="child"
            (addChild)="addChild.emit($event)"
            (confirm)="confirm.emit($event)">
          </app-tree-node>
        </ng-container>
      
        <!-- Botón “+ Añadir” como un nodo más al final -->
        <li *ngIf="node.group" class="add-node">
          <button (click)="addChild.emit(node)">+ Añadir {{ getAddButtonLabel(node.name) }}</button>
        </li>
    </ul>      
</li>
  